(function(e){function t(t){for(var r,i,s=t[0],c=t[1],u=t[2],l=0,d=[];l<s.length;l++)i=s[l],o[i]&&d.push(o[i][0]),o[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);m&&m(t);while(d.length)d.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,i=1;i<n.length;i++){var s=n[i];0!==o[s]&&(r=!1)}r&&(a.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},i={app:0},o={app:0},a=[];function s(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-05644e9e":"1a92d345","chunk-654bdffc":"993c80d2","chunk-efa8838e":"414e3e4b","chunk-2d0b1652":"1a044ce1","chunk-43403b2b":"5494c17c","chunk-821aa338":"f0518201","chunk-869dd63c":"e4284d1f"}[e]+".js"}function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={"chunk-05644e9e":1,"chunk-654bdffc":1,"chunk-efa8838e":1,"chunk-43403b2b":1,"chunk-821aa338":1,"chunk-869dd63c":1};i[e]?t.push(i[e]):0!==i[e]&&n[e]&&t.push(i[e]=new Promise(function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-05644e9e":"a3d0b440","chunk-654bdffc":"cf78e16c","chunk-efa8838e":"d9e08cd4","chunk-2d0b1652":"31d6cfe0","chunk-43403b2b":"094d1809","chunk-821aa338":"fa934085","chunk-869dd63c":"509ef93e"}[e]+".css",i=c.p+r,o=document.getElementsByTagName("link"),a=0;a<o.length;a++){var s=o[a],u=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(u===r||u===i))return t()}var l=document.getElementsByTagName("style");for(a=0;a<l.length;a++){s=l[a],u=s.getAttribute("data-href");if(u===r||u===i)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var r=t&&t.target&&t.target.src||i,o=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");o.request=r,n(o)},d.href=i;var m=document.getElementsByTagName("head")[0];m.appendChild(d)}).then(function(){i[e]=0}));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var a=new Promise(function(t,n){r=o[e]=[t,n]});t.push(r[2]=a);var u,l=document.getElementsByTagName("head")[0],d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=s(e),u=function(t){d.onerror=d.onload=null,clearTimeout(m);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src,a=new Error("Loading chunk "+e+" failed.\n("+r+": "+i+")");a.type=r,a.request=i,n[1](a)}o[e]=void 0}};var m=setTimeout(function(){u({type:"timeout",target:d})},12e4);d.onerror=d.onload=u,l.appendChild(d)}return Promise.all(t)},c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var m=l;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"04ff":function(e,t,n){"use strict";n("cadf"),n("551c"),n("097d");var r=n("1f5d"),i=n.n(r),o=n("f684"),a=n.n(o);i.a.prototype.bluebird=a.a;var s=new i.a("localhost",{});window.kuzzle=s,t["a"]=s},"07b8":function(e,t,n){},"254b":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"CreateEnvironment environment"},[e.useHttps&&!e.environment.ssl?n("warning-header",{attrs:{text:e.warningHeaderText}}):e._e(),n("div",{staticClass:"row"},[n("div",{staticClass:"col s12"},[n("div",{staticClass:"input-field left-align"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.environment.deviceId,expression:"environment.deviceId"},{name:"focus",rawName:"v-focus"}],staticClass:"CreateEnvironment-name",class:{invalid:e.errors.deviceId||e.errors.environmentAlreadyExists},attrs:{id:"env-name",type:"text",required:""},domProps:{value:e.environment.deviceId},on:{input:function(t){t.target.composing||e.$set(e.environment,"deviceId",t.target.value)}}}),n("label",{class:{active:e.environment.deviceId},attrs:{for:"env-name","data-error":"Device ID is required"}},[e._v("Device ID")])])])]),e._m(0)],1)},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row"},[n("div",{staticClass:"col s12"})])}],o=(n("6762"),n("2fdb"),n("7f7f"),n("28a5"),n("96cf"),n("1da1")),a=(n("a481"),n("cadf"),n("551c"),n("097d"),n("5ebb")),s=n("ecd3"),c=n("ad9d"),u=n("e9d9"),l="https:"===window.location.protocol,d={name:"CreateEnvironment",components:{WarningHeader:a["a"]},props:["environmentId"],directives:{Focus:s["a"]},computed:{environments:function(){return this.$store.state.kuzzle.environments},useHttps:function(){return l}},data:function(){return{errors:{name:!1,host:!1,environmentAlreadyExists:!1},environment:{name:"andrews_dev",deviceId:null,host:"localhost",port:7512,color:c["a"],ssl:l},colors:[c["a"],"#0277bd","#8e24aa","#689f38","#f57c00","#e53935","#546e7a","#d81b60"],warningHeaderText:'<i class="fa fa-exclamation-triangle" aria-hidden="true"></i> You are using the HTTPS/SSL version of the Admin Console.<i class="fa fa-exclamation-triangle" aria-hidden="true"></i> </br>Please ensure that your Kuzzle supports HTTPS/SSL connections.'}},methods:{getGuid:function(){var e=window.navigator,t=window.screen,n=e.mimeTypes.length;return n+=e.userAgent.replace(/\D+/g,""),n+=e.plugins.length,n+=t.height||"",n+=t.width||"",n+=t.pixelDepth||"",n},createEnvironment:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,n,r,i,o,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(console.log("jere"),console.log($),t=navigator.userAgent.split(" "),n=null,this.errors.name=!this.environment.name,!t.includes("ANDROID_ID")){e.next=9;break}n=t.split("ANDROID_ID=")[1],e.next=16;break;case 9:return this.errors.deviceId="Unkown device Id",e.next=12,$.getJSON("https://jsonip.com?callback=?",function(e){return e.ip});case 12:r=e.sent,i=this.getGuid(),n=i+"-"+r.ip,console.log("deviceid ",n);case 16:if(console.log("deviceid ",n),this.environment.host="localhost",this.environment.name="andrews_dev",o=this.environment.host.trim(),a=this.environment.name.trim(),this.environmentId&&this.environmentId===a?this.errors.environmentAlreadyExists=!1:this.errors.environmentAlreadyExists=void 0!==this.$store.state.kuzzle.environments[a],!(this.errors.name||this.errors.host||this.errors.environmentAlreadyExists)){e.next=24;break}throw new Error("Name or host invalid");case 24:return e.abrupt("return",this.$store.dispatch(u["b"],{id:a,environment:{name:a,deviceId:this.environment.deviceId,color:this.environment.color,host:o,port:this.environment.port,ssl:this.environment.ssl}}));case 25:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),selectColor:function(e){this.environment.color=this.colors[e]}},created:function(){this.environmentId&&this.environments[this.environmentId]?(this.environment.name=this.environments[this.environmentId].name,this.environment.deviceId=this.environments[this.environmentId].deviceId,this.environment.host=this.environments[this.environmentId].host,this.environment.port=this.environments[this.environmentId].port,this.environment.color=this.environments[this.environmentId].color,this.environment.ssl=this.environments[this.environmentId].ssl):(this.environment.name="andrews_dev",this.environment.host="localhost",this.environment.deviceId=null,this.environment.port=7512,this.environment.color=c["a"],this.environment.ssl=l),this.createEnvironment()}},m=d,f=n("2877"),v=Object(f["a"])(m,r,i,!1,null,null,null);v.options.__file="CreateEnvironment.vue";t["a"]=v.exports},2843:function(e,t,n){"use strict";var r=n("dda9"),i=n.n(r);i.a},"2a2b":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-form",[e.scanned?e._e():r("div",[r("div",{staticClass:"row message-warning"},[r("h5",[e._v("Checkout device")]),r("div",{staticClass:"divider"}),r("p",{staticClass:"message"},[e._v("\n                This device must be checked out in order to be used.\n            ")])]),e.startScan&&e.inDevelopment?r("div",[r("img",{staticStyle:{width:"30%"},attrs:{src:n("7cc6")}})]):e._e(),e.startScan?r("qrcode-stream",{on:{decode:e.onDecode}}):e._e(),e.startScan?e._e():r("v-btn",{attrs:{block:"",outline:"",primary:""},on:{click:function(t){e.startScan=!0}}},[e._v("Scan Badge")]),e.startScan?r("v-btn",{attrs:{block:"",outline:"",warning:""},on:{click:function(t){e.reload()}}},[e._v("Cancel")]):e._e()],1),e.scanned?r("div",{attrs:{row:""}},[r("v-label",[e._v("Hello "+e._s(e.username)+" sign here to acknowledge receipt of\n            device")]),r("div",{staticClass:"row message-warning"},[r("VueSignaturePad",{ref:"signaturePad",attrs:{width:"90%",height:"100px",required:"",options:{onEnd:e.onEnd}}})],1),r("div",{staticClass:"row"},[e.error?r("div",{staticClass:"col s12"},[e.error?r("p",{staticClass:"error card red-color white-text"},[r("i",{staticClass:"fa fa-times dismiss-error",on:{click:function(t){e.dismissError()}}}),e._v("\n                    Login failed: "),r("br"),e._v(e._s(e.error)+"\n                ")]):e._e(),e.error?e._e():r("p",[e._v("Â ")])]):e._e(),e.error?e._e():r("div",{staticClass:"col s8"},[r("p",{staticClass:"right"},[r("button",{staticClass:"btn waves-effect waves-light",attrs:{type:"submit",name:"action",tabindex:"3"},on:{click:e.login}},[e._v("\n                        Login\n                    ")])])])])],1):e._e(),e.inDevelopment?r("v-btn",{attrs:{block:"",outline:"",warning:""},on:{click:function(t){e.login()}}},[e._v("test")]):e._e()],1)},i=[],o=(n("7f7f"),n("ecd3")),a=n("9dc8"),s=n("a47c"),c=n("04ff"),u=n("2b0e"),l=n("2169"),d=n("9a3e");u["a"].use(l["a"]);var m={name:"LoginForm",props:{onLogin:Function},directives:{Focus:o["a"]},components:{QrcodeStream:d["QrcodeStream"]},data:function(){return{username:null,password:null,startScan:!1,accept:!1,scanned:!1,items:[],select:!1,userList:[],checkboxId:!1,error:"",bytes:null}},mounted:function(){},methods:{onDecode:function(e){var t=JSON.parse(e);t.name?(this.username=t.name,this.password=t.password,this.scanned=!0):this.error="bad scan"},onEnd:function(){this.bytes=l["a"].data().signatureData.src,this.signed=!0},dismissError:function(){this.error="",location.reload()},reload:function(){},login:function(){var e=this;this.error="",this.$store,this.username="ttest",this.password="asdfasdf",this.userid="1444044",this.$store.dispatch(a["b"],{username:this.username,password:this.password}).then(function(){e.$store.dispatch(s["b"],e.userid).then(function(){console.log("updaing sheets"),e.$store.dispatch(s["d"],{})}).then(function(){e.onLogin()}).catch(function(t){e.error=t.message})})},loginAsGuest:function(){var e=this;this.error="",c["a"].unsetJwtToken(),this.$store.dispatch(a["e"],"anonymous").then(function(){e.onLogin()}).catch(function(t){e.error=t.message})}}},f=m,v=(n("6ffc"),n("2877")),p=n("6544"),h=n.n(p),g=n("8336"),b=n("4bd4"),E=n("24c9"),C=Object(v["a"])(f,r,i,!1,null,"7ae4cab8",null);C.options.__file="Form.vue";t["a"]=C.exports;h()(C,{VBtn:g["a"],VForm:b["a"],VLabel:E["a"]})},"31b3":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{staticClass:"CreateEnvironmentPage login",on:{submit:function(t){return t.preventDefault(),e.createEnvironment(t)}}},[n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col card wrapper s12 offset-s0 m10 offset-m2 l8 offset-l3"},[e._m(0),e._m(1),n("create-environment",{ref:"createEnvironmentComponent",attrs:{"environment-id":null}}),e._m(2)],1)])])])},i=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("h2",{staticClass:"center-align logo"},[r("img",{staticStyle:{width:"30%"},attrs:{src:n("9e3b"),alt:"Andrews Group"}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row message-warning"},[n("h5",[e._v("Register Device")]),n("div",{staticClass:"divider"}),n("p",{staticClass:"message"},[e._v("\n            Please enter the device ID found on the back of the tablet.\n          ")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row"},[n("div",{staticClass:"col s4 right"},[n("button",{staticClass:"CreateEnvironmentPage-createBtn Environment-SubmitButton waves-effect btn",attrs:{type:"submit"}},[e._v("\n              Register device\n            ")])])])}],o=n("254b"),a={name:"CreateEnvironmentPage",components:{CreateEnvironment:o["a"]},methods:{createEnvironment:function(){var e=this;try{this.$refs.createEnvironmentComponent.createEnvironment().then(function(){return e.$router.push({name:"Home"})}).catch(function(e){return console.error(e)})}catch(t){}}}},s=a,c=n("2877"),u=Object(c["a"])(s,r,i,!1,null,null,null);u.options.__file="CreateEnvironmentPage.vue";t["a"]=u.exports},3735:function(e,t,n){"use strict";var r=n("45b5"),i=n.n(r);i.a},"3df4":function(e,t,n){"use strict";var r=n("c137"),i=n.n(r);i.a},"41da":function(e,t,n){},"42ef":function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o});var r="security/FETCH_USER_MAPPING",i="security/FETCH_PROFILE_MAPPING",o="security/FETCH_ROLE_MAPPING"},"45b5":function(e,t,n){},"50f3":function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return x});var r=n("04ff"),i=n("b9c0");function o(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"*",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"*",a=r["a"].security.isActionAllowed(e.rights,t,n,i,o);return"denied"!==a}var a=function(){return o(i["a"].state.user,"index","list")},s=function(){return o(i["a"].state.user,"security","getRole")},c=function(){return o(i["a"].state.user,"security","searchRoles")},u=function(){return o(i["a"].state.user,"security","createOrReplaceRole")},l=function(){return o(i["a"].state.user,"security","createRole")},d=function(){return o(i["a"].state.user,"security","deleteRole")},m=function(){return o(i["a"].state.user,"security","getProfile")},f=function(){return o(i["a"].state.user,"security","searchProfiles")},v=function(){return o(i["a"].state.user,"security","createOrReplaceProfile")},p=function(){return o(i["a"].state.user,"security","createProfile")},h=function(){return o(i["a"].state.user,"security","deleteProfile")},g=function(){return o(i["a"].state.user,"security","getUser")},b=function(){return o(i["a"].state.user,"security","searchUsers")},E=function(){return o(i["a"].state.user,"security","createOrReplaceUser")},C=function(){return o(i["a"].state.user,"security","createUser")},w=function(){return o(i["a"].state.user,"security","deleteUser")},_=function(){return s()||c()||u()||l()||d()},O=function(){return m()||f()||v()||p()||h()},y=function(){return g()||b()||E()||C()||w()},x=function(){return _()||O()||y()}},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var r=n("2b0e"),i=n("bb71");n("da64");r["a"].use(i["a"],{theme:{primary:"#ee44aa",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"},customProperties:!0,iconfont:"fa"}),document.body.setAttribute("data-app",!0);var o=n("8c4f"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"App"},[e.$store.state.kuzzle.errorFromKuzzle?n("div",{staticClass:"App-errored"},[n("error-layout",[n("kuzzle-error-page",{on:{"environment::create":e.editEnvironment,"environment::delete":e.deleteEnvironment}})],1)],1):n("div",[e.$store.getters.hasEnvironment?n("div",[e.$store.getters.currentEnvironmentId?n("div",{staticClass:"App-connected"},[e.$store.getters.isAuthenticated?n("div",{staticClass:"App-loggedIn"},[n("router-view",{on:{"environment::create":e.editEnvironment,"environment::delete":e.deleteEnvironment}}),n("input",{attrs:{type:"button",value:"Say hello",onClick:e.showAndroidToast("Hello Android!")}})],1):n("div",{staticClass:"App-loggedOut"},[e.$store.getters.adminAlreadyExists?n("div",{staticClass:"App-hasAdmin"},[n("login",{on:{"environment::create":e.editEnvironment,"environment::delete":e.deleteEnvironment}})],1):n("div",{staticClass:"App-noAdmin"},[n("sign-up",{on:{"environment::create":e.editEnvironment,"environment::delete":e.deleteEnvironment}})],1)])]):n("div",{staticClass:"App-disconnected"})]):n("div",{staticClass:"App-noEnvironments"},[n("create-environment-page")],1)]),n("modal-create",{attrs:{"is-open":e.isOpen,close:e.close,"environment-id":e.environmentId}}),n("modal-delete",{attrs:{"environment-id":e.environmentId,close:e.close,"is-open":e.deleteIsOpen}}),n("toaster")],1)},s=[],c=(n("96cf"),n("1da1")),u=(n("e008"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"row"},[n("div",{staticClass:"col offset-s4 s2"},[n("environment-switch",{on:{"environment::create":e.editEnvironment}})],1)]),e._m(0),n("div",{staticClass:"row"},[n("div",{staticClass:"col s12"},[n("connecting",{attrs:{host:e.host,port:e.port}})],1)])])}),l=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"col s12"},[n("h4",[n("i",{staticClass:"fa fa-plug"}),e._v(" Connecting to Kuzzle...")])])}],d=n("04ff"),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row kuzzle-disconnected"},[n("div",{staticClass:"col s12"},[n("p",[e._v("\n            I'm doing my best to connect to the Server at\n            "),n("span",{staticClass:"host primary"},[e._v(e._s(e.host)+":"+e._s(e.port))]),e._v("...\n        ")])]),e._m(0)])},f=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"col s1 offset-s5"},[n("div",{staticClass:"preloader-wrapper active valign-wrapper"},[n("div",{staticClass:"spinner-layer"},[n("div",{staticClass:"circle-clipper left"},[n("div",{staticClass:"circle"})]),n("div",{staticClass:"gap-patch"},[n("div",{staticClass:"circle"})]),n("div",{staticClass:"circle-clipper right"},[n("div",{staticClass:"circle"})])])])])}],v=(n("c5f6"),{name:"KuzzleDisconnected",props:{host:String,port:Number}}),p=v,h=(n("d1c4"),n("2877")),g=Object(h["a"])(p,m,f,!1,null,"30f31fae",null);g.options.__file="Connecting.vue";var b,E,C=g.exports,w=n("7e96"),_={name:"KuzzleDisconnectedPage",data:function(){return{host:null,port:null}},components:{Connecting:C,EnvironmentSwitch:w["a"]},mounted:function(){var e=this;this.host=d["a"].host,this.port=d["a"].port,E=d["a"].addListener("reconnected",function(){e.$router.push({name:"Home"})}),b=d["a"].addListener("connected",function(){e.$router.push({name:"Home"})}),"connected"!==d["a"].state&&"reconnected"!==d["a"].state||this.$router.push({name:"Login"})},destroyed:function(){d["a"].removeListener("reconnected",E),d["a"].removeListener("connected",b)},methods:{editEnvironment:function(e){this.$emit("environment::create",e)}}},O=_,y=(n("3735"),Object(h["a"])(O,u,l,!1,null,"169cc627",null));y.options.__file="KuzzleDisconnectedPage.vue";var x=y.exports,j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"row"},[n("div",{staticClass:"col offset-s4 s2"},[n("environment-switch",{on:{"environment::create":e.editEnvironment,"environment::delete":e.deleteEnvironment}})],1)]),n("div",{staticClass:"row message-warning"},[n("h5",[e._v(e._s(e.$store.state.kuzzle.errorFromKuzzle.message))]),n("div",{staticClass:"divider"}),e.errorInternalStatus||e.errorInternalMessage?n("div",{staticClass:"message"},[n("i",{staticClass:"fa fa-plug"}),e._v(" ["+e._s(e.errorInternalStatus)+"]\n            "+e._s(e.errorInternalMessage)+"\n        ")]):e._e()]),e._m(0)])},k=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row kuzzle-disconnected"},[n("div",{staticClass:"col s12"},[n("p",[e._v("Trying to connect to Server...")])]),n("div",{staticClass:"col s1 offset-s5"},[n("div",{staticClass:"preloader-wrapper active valign-wrapper"},[n("div",{staticClass:"spinner-layer"},[n("div",{staticClass:"circle-clipper left"},[n("div",{staticClass:"circle"})]),n("div",{staticClass:"gap-patch"},[n("div",{staticClass:"circle"})]),n("div",{staticClass:"circle-clipper right"},[n("div",{staticClass:"circle"})])])])])])}],I={name:"KuzzleErrorPage",data:function(){return{host:null,port:null}},components:{EnvironmentSwitch:w["a"]},computed:{errorInternalStatus:function(){return this.$store.state.kuzzle.errorFromKuzzle&&this.$store.state.kuzzle.errorFromKuzzle.internal?this.$store.state.kuzzle.errorFromKuzzle.internal.status:null},errorInternalMessage:function(){return this.$store.state.kuzzle.errorFromKuzzle&&this.$store.state.kuzzle.errorFromKuzzle.internal?this.$store.state.kuzzle.errorFromKuzzle.internal.message:null}},methods:{editEnvironment:function(e){this.$emit("environment::create",e)},deleteEnvironment:function(e){this.$emit("environment::delete",e)}}},S=I,T=(n("7048"),Object(h["a"])(S,j,k,!1,null,"6a3db699",null));T.options.__file="KuzzleErrorPage.vue";var A=T.exports,N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container-error"},[n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col card wrapper s6 offset-s3"},[e._m(0),e._t("default",[e._v("\n          An error occurred.\n        ")])],2)])])])},z=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"col s12"},[r("h1",{staticClass:"center-align logo"},[r("img",{attrs:{src:n("9b19"),alt:"Kuzzle Backoffice"}})])])}],L=(n("8e11"),{}),$=Object(h["a"])(L,N,z,!1,null,"09265855",null);$.options.__file="Layout.vue";var R=$.exports,P=n("c3f0"),D=n("578a"),F=n("31b3"),M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{staticClass:"EnvironmentsCreateModal",on:{submit:function(t){return t.preventDefault(),e.createEnvironment(t)}}},[n("modal",{attrs:{id:"create-env","footer-fixed":!0,"is-open":e.isOpen,close:e.close}},[n("div",{staticClass:"row"},[n("div",{staticClass:"col s12"},[n("h4",[e._v(e._s(e.environmentId?"Update":"Create")+" Connection")]),n("div",{staticClass:"divider"})])]),n("create-environment",{ref:"createEnvironmentComponent",attrs:{"environment-id":e.environmentId}}),n("span",{attrs:{slot:"footer"},slot:"footer"},[n("button",{staticClass:"EnvironmentsCreateModal-submit Environment-SubmitButton waves-effect btn",attrs:{type:"submit"}},[e._v("\n          "+e._s(e.environmentId?"Update":"Create")+"\n      ")]),n("button",{staticClass:"btn-flat waves-effect waves-grey",on:{click:function(t){return t.preventDefault(),e.close(t)}}},[e._v("\n          Cancel\n      ")])])],1)],1)},V=[],U=n("68c2"),J=n("254b"),q={name:"EnvironmentsCreateModal",props:["environmentId","isOpen","close"],components:{Modal:U["a"],CreateEnvironment:J["a"]},methods:{createEnvironment:function(){try{this.$refs.createEnvironmentComponent.createEnvironment(),this.close()}catch(e){}}}},K=q,H=(n("affa"),Object(h["a"])(K,M,V,!1,null,"0759591c",null));H.options.__file="ModalCreate.vue";var B=H.exports,G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{staticClass:"EnvironmentDeleteModal",on:{submit:function(t){return t.preventDefault(),e.confirmDeleteEnvironment(t)}}},[n("modal",{attrs:{id:"delete-env","additional-class":"left-align",close:e.close,"is-open":e.isOpen}},[n("div",{staticClass:"row"},[n("div",{staticClass:"col s12"},[n("h4",[e._v("Environment "),n("strong",[e._v(e._s(e.environmentName))]),e._v(" deletion")]),n("div",{staticClass:"divider"})])]),n("div",{staticClass:"row"},[n("div",{staticClass:"col s7"},[n("div",{staticClass:"input-field left-align"},[n("label",{attrs:{for:"env-to-delete-name"}},[e._v("Confirm environment name")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.envConfirmation,expression:"envConfirmation"},{name:"focus",rawName:"v-focus"}],staticClass:"EnvironmentDeleteModal-envName",attrs:{id:"env-to-delete-name",type:"text"},domProps:{value:e.envConfirmation},on:{input:function(t){t.target.composing||(e.envConfirmation=t.target.value)}}})])])]),n("span",{attrs:{slot:"footer"},slot:"footer"},[n("button",{staticClass:"EnvironmentDeleteModal-submit waves-effect btn",class:{unauthorized:e.environmentName!==e.envConfirmation},attrs:{type:"submit",disabled:e.environmentName!==e.envConfirmation}},[e._v("\n          Delete\n      ")]),n("button",{staticClass:"btn-flat waves-effect waves-grey",attrs:{href:"#!"},on:{click:function(t){return t.preventDefault(),e.close(t)}}},[e._v("\n          Cancel\n      ")])])])],1)},W=[],X=(n("7f7f"),n("ecd3")),Y=n("ad9d"),Q={name:"EnvironmentDeleteModal",props:["environmentId","isOpen","close"],directives:{Focus:X["a"]},components:{Modal:U["a"]},computed:{environments:function(){return this.$store.state.kuzzle.environments}},data:function(){return{environmentName:null,envConfirmation:null}},methods:{confirmDeleteEnvironment:function(){this.environmentName===this.envConfirmation&&(Object(Y["b"])(this.environmentId),this.close())}},watch:{environmentId:function(){this.environmentId&&this.environments[this.environmentId]&&(this.environmentName=this.environments[this.environmentId].name)},isOpen:function(){this.envConfirmation=null}}},Z=Q,ee=(n("a30c"),Object(h["a"])(Z,G,W,!1,null,"5b62f740",null));ee.options.__file="ModalDelete.vue";var te=ee.exports,ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"toast-error"})},re=[],ie={name:"Toaster",watch:{"$store.state.toaster.toast":function(){Materialize.toast(this.$store.state.toaster.toast.text,this.$store.state.toaster.toast.duration,this.$store.state.toaster.toast.cssClass,this.$store.state.toaster.toast.cb)}}},oe=ie,ae=Object(h["a"])(oe,ne,re,!1,null,null,null);ae.options.__file="Toaster.vue";var se=ae.exports,ce=(n("15f5"),n("a47c"));window.jQuery=window.$=n("1157"),n("c12b");var ue={name:"KuzzleBackOffice",components:{KuzzleDisconnectedPage:x,ErrorLayout:R,ModalCreate:B,ModalDelete:te,Toaster:se,KuzzleErrorPage:A,SignUp:P["default"],Login:D["a"],CreateEnvironmentPage:F["a"]},data:function(){return{environmentId:null,isOpen:!1,deleteIsOpen:!1}},methods:{editEnvironment:function(e){this.environmentId=e,this.isOpen=!0},showAndroidToast:function(){},deleteEnvironment:function(e){this.environmentId=e,this.deleteIsOpen=!0},close:function(){this.isOpen=!1,this.deleteIsOpen=!1}},beforeCreate:function(){this.$store.dispatch(ce["e"],{}),this.$store.dispatch(ce["d"],{})},mounted:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$store.dispatch(ce["e"],{}),this.$store.dispatch(ce["d"],{});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},le=ue,de=Object(h["a"])(le,a,s,!1,null,null,null);de.options.__file="App.vue";var me=de.exports,fe=n("653a"),ve=n("bcdb"),pe=n("e9d9");n("d5e8");Object(ve["c"])(fe["a"]),console.log(Object({NODE_ENV:"production",BASE_URL:"/"})),r["a"].use(o["a"]),console.log(navigator.userAgent),fe["a"].dispatch(pe["d"]),fe["a"].dispatch(pe["k"]).then(function(){var e=n("f6c6").default;new r["a"]({el:"#app",router:e,store:fe["a"],render:function(e){return e(me)}})}).catch(function(){var e=n("f6c6").default;new r["a"]({el:"#app",router:e,store:fe["a"],render:function(e){return e(me)}})})},"578a":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login"},[n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col card wrapper s10 offset-s1 m8 offset-m2 l6 offset-l3"},[e._m(0),n("div",{staticClass:"row"},[n("login-form",{attrs:{"on-login":e.onLogin}})],1)])])])])},i=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"row"},[r("div",{staticClass:"col s12"},[r("h2",{staticClass:"center-align logo"},[r("img",{staticStyle:{width:"30%"},attrs:{src:n("9e3b"),alt:"Welcome to Andrews"}})])])])}],o=n("2a2b"),a=n("a16a"),s={name:"Login",components:{LoginForm:o["a"]},data:function(){return{environmentId:null,signed:!1}},methods:{onLogin:function(){window.document.body.style.overflow="visible",this.$store.getters.routeBeforeRedirect?this.$router.push({name:this.$store.getters.routeBeforeRedirect}):this.$router.push({name:"Home"}),this.$store.commit(a["a"],null)},editEnvironment:function(e){this.$emit("environment::create",e)},deleteEnvironment:function(e){this.$emit("environment::delete",e)}}},c=s,u=(n("2843"),n("2877")),l=Object(u["a"])(c,r,i,!1,null,"110c3078",null);l.options.__file="Login.vue";t["a"]=l.exports},"5ebb":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"WarningHeader"},[n("span",{domProps:{innerHTML:e._s(e.text)}})])},i=[],o={name:"WarningHeader",props:{text:{type:String,required:!0}}},a=o,s=(n("3df4"),n("2877")),c=Object(s["a"])(a,r,i,!1,null,null,null);c.options.__file="WarningHeader.vue";t["a"]=c.exports},"627e":function(e,t,n){"use strict";n.d(t,"a",function(){return r});n("cadf"),n("551c"),n("097d");var r="SET_TOAST"},"653a":function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"kuzzleIsConnected",function(){return A}),n.d(r,"currentEnvironmentId",function(){return N}),n.d(r,"currentEnvironment",function(){return z}),n.d(r,"hasEnvironment",function(){return L}),n.d(r,"kuzzleHost",function(){return $}),n.d(r,"deviceId",function(){return R}),n.d(r,"kuzzlePort",function(){return P}),n.d(r,"oldMappingSupport",function(){return D});var i={};n.r(i),n.d(i,"isRealtimeOnly",function(){return fe}),n.d(i,"flattenMapping",function(){return ve}),n.d(i,"flattenSchema",function(){return pe}),n.d(i,"flattenSchemaWithType",function(){return he}),n.d(i,"schemaMappingMerged",function(){return ge}),n.d(i,"simplifiedMapping",function(){return be});var o={};n.r(o),n.d(o,"indexCollections",function(){return Ae});n("cadf"),n("551c"),n("097d");var a,s,c,u,l,d,m,f,v,p,h=n("2b0e"),g=n("2f62"),b=n("b9c0"),E=n("ade3"),C="ADD_NOTIFICATION",w="EMPTY_NOTIFICATION",_={notifications:[]},O=(a={},Object(E["a"])(a,C,function(e,t){e.notifications.push(t)}),Object(E["a"])(a,w,function(e){e.notifications=[]}),a),y={state:_,mutations:O},x=n("b5a4"),j={basicFilter:null},k=Object(E["a"])({},x["SET_BASIC_FILTER"],function(e,t){e.basicFilter=t}),I={state:j,mutations:k},S=n("be94"),T=(n("ac6a"),n("456d"),n("e9d9")),A=function(e){return null!==e.connectedTo},N=function(e){return e.connectedTo},z=function(e,t){return e.environments[t.currentEnvironmentId]?e.environments[t.currentEnvironmentId]:null},L=function(e){return 0!==Object.keys(e.environments).length},$=function(e){return e.host},R=function(e){return e.deviceId},P=function(e){return e.port},D=function(e,t){return e.environments[t.currentEnvironmentId]?/^2/.test(e.environments[t.currentEnvironmentId].storageEngineVersion):null},F=(n("7f7f"),n("9dc8")),M=n("bcdb"),V="environments",U="lastConnectedEnv",J=(s={},Object(E["a"])(s,T["f"],function(e,t){var n=e.commit,r=e.dispatch;n(T["a"],t),r(T["i"],t)}),Object(E["a"])(s,T["b"],function(e,t){var n=e.commit,r=e.state,i=e.dispatch;try{n(T["b"],t)}catch(o){console.warn("Unable to add ".concat(t.id,". Got the following error\n      ").concat(o.message))}return localStorage.setItem(V,JSON.stringify(r.environments)),i(T["j"],t.id)}),Object(E["a"])(s,T["c"],function(e,t){var n=e.commit,r=e.state,i=e.dispatch;n(T["c"],t),r.lastConnectedEnv===t&&(i(T["i"],null),localStorage.removeItem(U)),localStorage.setItem(V,JSON.stringify(r.environments))}),Object(E["a"])(s,T["m"],function(e,t){var n=e.commit,r=e.state,i=e.getters;n(T["l"],{id:i.currentEnvironmentId,environment:Object(S["a"])({},i.currentEnvironment,{token:t})}),localStorage.setItem(V,JSON.stringify(r.environments))}),Object(E["a"])(s,T["l"],function(e,t){var n=e.commit,r=e.state,i=e.getters,o=e.dispatch;return n(T["l"],{id:t.id,environment:t.environment}),localStorage.setItem(V,JSON.stringify(r.environments)),i.currentEnvironment&&i.currentEnvironment.name&&i.currentEnvironment.name!==t.id?o(T["j"],t.id):Promise.resolve()}),Object(E["a"])(s,T["k"],function(e){var t=e.state,n=e.dispatch;if(0===Object.keys(t.environments).length)return Promise.resolve();var r=t.lastConnectedEnv;return r||(r=Object.keys(t.environments)[0],n(T["i"],r)),n(T["j"],r)}),Object(E["a"])(s,T["j"],function(e,t){var n=e.commit,r=e.state,i=e.dispatch;if(!t)return Promise.reject(new Error("No id provided"));var o=r.environments[t];if(!o)throw new Error("Id ".concat(t," does not match any environment"));return n(T["e"]),Object(M["b"])(o),i(T["f"],t),Object(M["f"])(1e3).then(function(){return i(F["d"],{token:o.token})}).then(function(){return i(F["a"])}).catch(function(e){return n(T["h"],e),Promise.reject(e)})}),Object(E["a"])(s,T["d"],function(e){var t,n,r=e.commit;try{t=JSON.parse(localStorage.getItem(V)||"{}"),r(T["g"],t),n=localStorage.getItem(U),r(T["i"],n)}catch(i){r(T["g"],{})}}),Object(E["a"])(s,T["i"],function(e,t){var n=e.commit;localStorage.setItem(U,t),n(T["i"],t)}),s),q={environments:{},lastConnectedEnv:null,connectedTo:null,errorFromKuzzle:null},K=(c={},Object(E["a"])(c,T["b"],function(e,t){if(!t)throw new Error("The environment can't be falsy");if(-1!==Object.keys(e.environments).indexOf(t.id))throw new Error('Unable to add new environment to already existing id "'.concat(t.id,'"'));e.environments=Object(S["a"])({},e.environments,Object(E["a"])({},t.id,t.environment))}),Object(E["a"])(c,T["l"],function(e,t){if(-1===Object.keys(e.environments).indexOf(t.id))throw new Error("The given id ".concat(t.id," does not correspond to any existing\n        environment."));e.environments=Object(S["a"])({},e.environments,Object(E["a"])({},t.id,t.environment))}),Object(E["a"])(c,T["c"],function(e,t){-1!==Object.keys(e.environments).indexOf(t)&&h["a"].delete(e.environments,t)}),Object(E["a"])(c,T["a"],function(e,t){if(null===t)throw new Error("Cannot connect to a null environment. To reset connection, use the RESET mutation.");if(-1===Object.keys(e.environments).indexOf(t))throw new Error("The given id ".concat(t," does not correspond to any existing environment."));e.connectedTo=t}),Object(E["a"])(c,T["h"],function(e,t){e.errorFromKuzzle=t}),Object(E["a"])(c,T["g"],function(e,t){e.environments=Object(S["a"])({},t)}),Object(E["a"])(c,T["i"],function(e,t){e.lastConnectedEnv=t}),Object(E["a"])(c,T["e"],function(e){e.connectedTo=null}),c),H={state:q,mutations:K,getters:r,actions:J},B=n("a16a"),G={routeBeforeRedirect:null},W=Object(E["a"])({},B["a"],function(e,t){e.routeBeforeRedirect=t}),X={state:G,mutations:W},Y=n("d51c"),Q=n("2909"),Z=(n("28a5"),n("53ca")),ee=n("2ef0"),te=n.n(ee),ne={"input:text":{id:"input:text",name:"Input text",tag:"input",type:"text"},textarea:{id:"textarea",name:"Textarea",tag:"textarea"},"rich-text":{id:"rich-text",name:"Rich text",tag:"rich-text"},"select:text":{id:"select:text",name:"Select box with text",tag:"select",type:"text",chooseValues:!0},"select:integer":{id:"select:integer",name:"Select box with integer",tag:"select",cast:"integer",chooseValues:!0},"select:float":{id:"select:float",name:"Select box with float",tag:"select",cast:"float",chooseValues:!0},"mselect:text":{id:"mselect:text",name:"Multi select",tag:"mselect",chooseValues:!0,type:"text"},"mselect:integer":{id:"mselect:integer",name:"Multi select",tag:"mselect",chooseValues:!0,cast:"integer"},checkbox:{id:"checkbox",name:"Checkbox",tag:"checkbox"},"input:number:integer":{id:"input:number:integer",name:"Input number",tag:"input",type:"number",cast:"integer",step:1},"input:number:short":{id:"input:number:short",name:"Input number",tag:"input",type:"number",cast:"float",step:.001},"input:number:float":{id:"input:number:float",name:"Input number",tag:"input",type:"number",cast:"float",step:1e-9},"input:number:double":{id:"input:number:double",name:"Input number",tag:"input",type:"number",cast:"float",step:1e-17},"input:number:halfFloat":{id:"input:number:halfFloat",name:"Input number",tag:"input",type:"number",cast:"float",step:1e-4},"input:fieldset":{id:"input:fieldset",name:"Fieldset",tag:"fieldset"},geopoint:{id:"geopoint",name:"Geo point",tag:"geo-point"},json:{id:"json",name:"Json",tag:"json"}},re=ne["json"],ie={keyword:{elements:[ne["input:text"],ne["textarea"],ne["select:text"],ne["mselect:text"]],default:ne["input:text"]},text:{elements:[ne["input:text"],ne["textarea"],ne["rich-text"],ne["select:text"],ne["mselect:text"]],default:ne["input:text"]},boolean:{elements:[ne["checkbox"],ne["input:text"]],default:ne["checkbox"]},long:{elements:[ne["input:number:integer"],ne["select:float"]],default:ne["input:number:integer"]},integer:{elements:[ne["input:number:integer"],ne["select:integer"],ne["mselect:integer"]],default:ne["input:number:integer"]},short:{elements:[ne["input:number:short"],ne["select:float"],ne["mselect:integer"]],default:ne["input:number:short"]},byte:{elements:[ne["input:number:integer"],ne["select:integer"],ne["mselect:integer"]],default:ne["input:number:integer"]},double:{elements:[ne["input:number:double"],ne["select:integer"],ne["mselect:integer"]],default:ne["input:number:double"]},float:{elements:[ne["input:number:float"],ne["select:float"],ne["mselect:integer"]],default:ne["input:number:float"]},half_float:{elements:[ne["input:number:halfFloat"],ne["select:float"],ne["mselect:integer"]],default:ne["input:number:halfFloat"]},scaled_float:{elements:[ne["input:number:float"],ne["select:float"],ne["mselect:integer"]],default:ne["input:number:float"]},object:{elements:[ne["input:fieldset"]],default:ne["input:fieldset"]},nested:{elements:[ne["json"]],default:ne["json"]},ip:{elements:[ne["input:text"],ne["select:text"],ne["mselect:text"]],default:ne["input:text"]},date:{elements:[ne["input:text"]],default:ne["input:text"]},binary:{elements:[ne["input:text"],ne["input:textarea"]],default:ne["input:textarea"]},geo_point:{elements:[ne["geopoint"],ne["input:text"]],default:ne["geopoint"]}},oe=function(e){return e&&"object"===Object(Z["a"])(e)&&!Array.isArray(e)},ae=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return oe(t)&&oe(n)&&Object.keys(n).forEach(function(i){if(!t[i])if(n[i].type)t[i]=ie[n[i].type]?ie[n[i].type].default:Object(S["a"])({},ne["json"]);else if(n[i].properties){if(r>=2)return void(t[i]=Object(S["a"])({},ne["json"]));r+=1,t[i]={tag:"fieldset",properties:e({},n[i].properties,r)},r=0}}),t},se=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i={};return""!==n&&(n+="."),Object.keys(t).forEach(function(o){t[o].properties?r>1?i[n+o]="force-json":i=Object(S["a"])({},i,e(t[o].properties,n+o,r+1)):i[n+o]=t[o].type}),i},ce=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i={};return""!==n&&(n+="."),Object.keys(t).forEach(function(o){t[o].properties?r>1?i[n+o]=Object(S["a"])({},re):i=Object(S["a"])({},i,e(t[o].properties,n+o,r+1)):i[n+o]=t[o]}),i},ue=function(e){return ie[e]&&ie[e].default?Object(S["a"])({},ie[e].default):Object(S["a"])({},re)},le=function(e){var t={};return Object.keys(e).map(function(n){var r=n;if(-1!==n.indexOf(".")){var i=n.split(".");r=[i[0],"properties"].concat(Object(Q["a"])(i.slice(1))).join(".")}te.a.set(t,r,e[n])}),t},de=function(e){var t=e.mapping,n=e.schema,r=e.allowForm;return{properties:Object(S["a"])({},t),_meta:{schema:n,allowForm:r}}},me=function e(t){var n={};return Object.keys(t).forEach(function(r){t[r].properties?n[r]=e(t[r].properties):n[r]=t[r].type}),n},fe=function(e){return e.isRealtimeOnly},ve=function(e){return se(e.mapping)},pe=function(e){return ce(e.schema)},he=function(e,t){var n={};return Object.keys(t.flattenMapping).forEach(function(e){t.flattenSchema&&t.flattenSchema[e]?n[e]=Object(S["a"])({},t.flattenSchema[e]):n[e]=Object(S["a"])({},ue(t.flattenMapping[e]))}),n},ge=function(e){return ae(e.schema,e.mapping)},be=function(e){return me(e.mapping)},Ee=n("04ff"),Ce=n("f684"),we=n.n(Ce),_e=(u={},Object(E["a"])(u,Y["b"],function(e,t){var n=e.state,r=t.index;return Ee["a"].queryPromise({controller:"collection",action:"updateMapping"},{collection:n.name,index:r,body:de({mapping:n.mapping,schema:n.schema,allowForm:n.allowForm})})}),Object(E["a"])(u,Y["m"],function(e,t){e.commit;var n=e.state,r=t.index;return n.isRealtimeOnly?we.a.resolve():Ee["a"].queryPromise({controller:"collection",action:"updateMapping"},{collection:n.name,index:r,body:de({mapping:n.mapping,schema:n.schema,allowForm:n.allowForm})})}),Object(E["a"])(u,Y["c"],function(e,t){var n=e.commit,r=e.getters,i=(e.state,e.dispatch),o=t.index,a=t.collection;return a?-1!==r.indexCollections(o).stored.indexOf(a)?Ee["a"].queryPromise({controller:"collection",action:"getMapping"},{collection:a,index:o}).then(function(e){var t=e.result[o].mappings[a],r={},s=!1;t._meta&&(r=t._meta.schema||{},s=t._meta.allowForm||!1),i(Y["d"],{index:o,collection:a}),n(Y["e"],{name:a,mapping:t.properties||{},schema:r,allowForm:s,isRealtimeOnly:!1})}).catch(function(e){return we.a.reject(new Error(e.message))}):-1!==r.indexCollections(o).realtime.indexOf(a)?(n(Y["e"],{name:a,mapping:{},isRealtimeOnly:!0,schema:{},allowForm:!1}),we.a.resolve()):we.a.reject(new Error("Unknown collection ".concat(a))):(n(Y["f"]),we.a.resolve)}),Object(E["a"])(u,Y["d"],function(e,t){e.commit;var n=e.dispatch,r=t.index,i=t.collection,o=JSON.parse(localStorage.getItem("defaultJsonView")||"{}");return o[r]?n(Y["h"],{index:r,collection:i,jsonView:o[r][i]||!1}):n(Y["h"],{index:r,collection:i,jsonView:!1})}),Object(E["a"])(u,Y["h"],function(e,t){var n=e.commit,r=t.index,i=t.collection,o=t.jsonView,a=JSON.parse(localStorage.getItem("defaultJsonView")||"{}");return a[r]||(a[r]={}),a[r][i]=o,localStorage.setItem("defaultJsonView",JSON.stringify(a)),n(Y["h"],{jsonView:o})}),Object(E["a"])(u,Y["a"],function(e,t){var n=e.state,r=t.index;t.collection;return Ee["a"].queryPromise({controller:"collection",action:"truncate"},{index:r,collection:n.name},{refresh:"wait_for"}).then(function(e){return we.a.resolve}).catch(function(e){return we.a.reject(new Error(e.message))})}),u),Oe={name:null,mapping:{},isRealtimeOnly:!1,schema:{},allowForm:!0,defaultViewJson:!1},ye=(l={},Object(E["a"])(l,Y["e"],function(e,t){e.name=t.name,e.mapping=t.mapping,e.isRealtimeOnly=t.isRealtimeOnly,e.schema=t.schema,e.allowForm=t.allowForm}),Object(E["a"])(l,Y["f"],function(e){e.name=null,e.mapping={},e.schema={},e.isRealtimeOnly=!1,e.allowForm=!0}),Object(E["a"])(l,Y["j"],function(e,t){e.mapping=t}),Object(E["a"])(l,Y["l"],function(e,t){e.schema=le(t)}),Object(E["a"])(l,Y["g"],function(e,t){e.allowForm=t}),Object(E["a"])(l,Y["k"],function(e,t){e.isRealtimeOnly=t}),Object(E["a"])(l,Y["i"],function(e,t){e.name=t}),Object(E["a"])(l,Y["h"],function(e,t){var n=t.jsonView;e.defaultViewJson=n}),l),xe={state:Oe,mutations:ye,actions:_e,getters:i},je=n("627e"),ke={toast:{}},Ie=Object(E["a"])({},je["a"],function(e,t){e.toast=Object(S["a"])({text:null,duration:5e3,cssClass:"error",cb:null},t)}),Se={state:ke,mutations:Ie},Te=n("e710"),Ae=function(e){return function(t){return e.indexesAndCollections[t]||{realtime:[],stored:[]}}},Ne=(n("5df3"),function(e){if(!e.realtime)return e;var t=e.realtime.filter(function(t){return-1===e.stored.indexOf(t)});return{stored:e.stored,realtime:t}}),ze=function(e){return 0===e.length?{realtime:[],stored:[]}:{realtime:e.filter(function(e){return"realtime"===e.type}).map(function(e){return e.name})||[],stored:e.filter(function(e){return"stored"===e.type}).map(function(e){return e.name})||[]}},Le=function(e){var t=JSON.parse(localStorage.getItem("realtimeCollections")||"[]").filter(function(t){return t.index===e}).map(function(e){return e.collection});return t},$e=function(e){var t=JSON.parse(localStorage.getItem("realtimeCollections")||"[]");t=t.filter(function(t){return t.index!==e}),localStorage.setItem("realtimeCollections",JSON.stringify(t))},Re=(d={},Object(E["a"])(d,Te["e"],function(e,t){var n=e.commit;return Ee["a"].queryPromise({index:t,controller:"index",action:"create"},{}).then(function(){n(Te["a"],t)}).catch(function(e){return we.a.reject(new Error(e.message))})}),Object(E["a"])(d,Te["f"],function(e,t){var n=e.commit;return Ee["a"].queryPromise({index:t,controller:"index",action:"delete"},{}).then(function(){$e(t),n(Te["f"],t)}).catch(function(e){return we.a.reject(new Error(e.message))})}),Object(E["a"])(d,Te["g"],function(e){var t=e.commit,n=[];return new we.a(function(e,r){Ee["a"].listIndexes(function(i,o){var a={};if(i)return r(new Error(i.message));o.filter(function(e){return"%kuzzle"!==e}).forEach(function(e){var t=new we.a(function(t,n){Ee["a"].listCollections(e,function(r,i){r?n(new Error(r.message)):(i=ze(i),i.realtime||(i.realtime=[]),i.realtime=i.realtime.concat(Le(e)),i=Ne(i),a[e]=i,t(a))})});n.push(t)}),we.a.all(n).then(function(n){t(Te["h"],n[0]||[]),e()}).catch(function(e){return r(e)})})})}),Object(E["a"])(d,Te["d"],function(e,t){var n=e.dispatch,r=e.commit,i=e.getters,o=t.index,a=t.collection,s=t.isRealtimeOnly;if(!a)return we.a.reject(new Error("Invalid collection name"));if(-1!==i.indexCollections(o).stored.indexOf(a)||-1!==i.indexCollections(o).realtime.indexOf(a))return we.a.reject(new Error('Collection "'.concat(a,'" already exist')));if(s){var c=JSON.parse(localStorage.getItem("realtimeCollections")||"[]");return c.push({index:o,collection:a}),localStorage.setItem("realtimeCollections",JSON.stringify(c)),r(Te["b"],{index:o,name:a}),we.a.resolve()}return n(Y["b"],{index:o}).then(function(){r(Te["c"],{index:o,name:a})}).catch(function(e){return we.a.reject(new Error(e.message))})}),Object(E["a"])(d,Te["i"],function(e,t){var n=e.commit,r=t.index,i=t.collection,o=JSON.parse(localStorage.getItem("realtimeCollections")||"[]");o=o.filter(function(e){return e.index!==r&&e.collection!==i}),localStorage.setItem("realtimeCollections",JSON.stringify(o)),n(Te["i"],{index:r,collection:i})}),d),Pe={indexes:[],indexesAndCollections:{}},De=(m={},Object(E["a"])(m,Te["h"],function(e,t){e.indexes=Object.keys(t),e.indexesAndCollections=t}),Object(E["a"])(m,Te["c"],function(e,t){e.indexesAndCollections[t.index]||(e.indexes.push(t.index),e.indexesAndCollections[t.index]={realtime:[],stored:[]}),e.indexesAndCollections[t.index].stored.push(t.name)}),Object(E["a"])(m,Te["b"],function(e,t){e.indexesAndCollections[t.index]||(e.indexes.push(t.index),e.indexesAndCollections[t.index]={realtime:[],stored:[]}),e.indexesAndCollections[t.index].realtime.push(t.name)}),Object(E["a"])(m,Te["a"],function(e,t){e.indexes.push(t),e.indexesAndCollections[t]={realtime:[],stored:[]}}),Object(E["a"])(m,Te["f"],function(e,t){e.indexes.splice(e.indexes.indexOf(t),1),delete e.indexesAndCollections[t]}),Object(E["a"])(m,Te["i"],function(e,t){var n=t.index,r=t.collection;e.indexesAndCollections[n]&&e.indexesAndCollections[n].realtime&&(e.indexesAndCollections[n].realtime=e.indexesAndCollections[n].realtime.filter(function(e){return e!==r}))}),m),Fe={state:Pe,mutations:De,actions:Re,getters:o},Me=n("42ef"),Ve=(f={},Object(E["a"])(f,Me["c"],function(e){var t=e.commit;return Ee["a"].queryPromise({controller:"security",action:"getUserMapping"},{}).then(function(e){return e.result.schema={},t(Y["e"],e.result),we.a.resolve(e.result.mapping)})}),Object(E["a"])(f,Me["a"],function(e){var t=e.commit;return Ee["a"].queryPromise({controller:"security",action:"getProfileMapping"},{}).then(function(e){return e.result.schema={},t(Y["e"],e.result),we.a.resolve(e.result.mapping)})}),Object(E["a"])(f,Me["b"],function(e){var t=e.commit;return Ee["a"].queryPromise({controller:"security",action:"getRoleMapping"},{}).then(function(e){return e.result.schema={},t(Y["e"],e.result),we.a.resolve(e.result.mapping)})}),f),Ue={actions:Ve},Je=(n("96cf"),n("1da1")),qe=n("a47c"),Ke={users:[],timeSheets:[],deviceUserlist:[]},He=(v={},Object(E["a"])(v,qe["e"],function(){var e=Object(Je["a"])(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,t.dispatch,e.next=3,Object(M["e"])(null,null,{},50,{});case 3:r=e.sent,n(qe["f"],r);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),Object(E["a"])(v,qe["a"],function(){var e=Object(Je["a"])(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,t.dispatch,e.next=3,Object(M["d"])("timeSheets","playground",{query:{bool:{must:[{match:{out_timestamp:"0"}}]}}},50,[]);case 3:r=e.sent,n(qe["a"],r);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),Object(E["a"])(v,qe["b"],function(){var e=Object(Je["a"])(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.commit,t.dispatch,e.next=3,Object(M["a"])(n);case 3:return r=e.sent,console.log(r),e.abrupt("return",r);case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()),Object(E["a"])(v,qe["d"],function(){var e=Object(Je["a"])(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,t.dispatch,e.next=3,Object(M["d"])("timeSheets","playground",{},50,{});case 3:r=e.sent,n(qe["c"],r);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),v),Be=(p={},Object(E["a"])(p,qe["f"],function(e,t){e.users=t}),Object(E["a"])(p,qe["a"],function(e,t){e.deviceUserlist=t}),Object(E["a"])(p,qe["c"],function(){var e=Object(Je["a"])(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.timeSheets=n;case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()),p),Ge={state:Ke,mutations:Be,actions:He};h["a"].use(g["a"]);t["a"]=new g["a"].Store({modules:{auth:b["a"],realtime:y,crudlDocument:I,kuzzle:H,collection:xe,routing:X,toaster:Se,index:Fe,security:Ue,users:Ge},strict:!1})},6634:function(e,t,n){"use strict";var r=n("c106"),i=n.n(r);i.a},"68c2":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.isOpen?n("div",{staticClass:"modal",class:e.computedClasses,attrs:{id:e.id}},[e._t("content",[n("div",{staticClass:"modal-content"},[e._t("default")],2),e.hasFooter?n("div",{staticClass:"modal-footer",class:{grey:e.loading}},[e._t("footer")],2):e._e()])],2):e._e(),e.isOpen?n("div",{staticClass:"lean-overlay",staticStyle:{"z-index":"1002",display:"block",opacity:"0.5"},on:{click:function(t){e.canClose&&e.close()}}}):e._e()])},i=[],o=n("2b0e"),a=27,s={props:{id:String,additionalClass:{type:String,default:"",required:!1},canClose:{type:Boolean,default:!0,required:!1},hasFooter:{type:Boolean,default:!0,required:!1},footerFixed:{type:Boolean,default:!1},close:{type:Function},bottom:Boolean,isOpen:Boolean,loading:Boolean},watch:{isOpen:function(e){window.document.body.style.overflow=e?"hidden":"visible"}},mounted:function(){var e=this;o["a"].nextTick(function(){window.document.addEventListener("keydown",e.handleEsc)})},destroyed:function(){window.document.removeEventListener("keydown",this.handleEsc)},computed:{computedClasses:function(){var e="";return this.isOpen?(this.footerFixed&&(e="modal-fixed-footer "),this.bottom?e+"bottom-modal bottom-sheet "+this.additionalClass+(this.loading?" grey":""):e+"normal-modal "+this.additionalClass+(this.loading?" grey":"")):null},transition:function(){return this.bottom?"modal-bottom":"modal"}},methods:{handleEsc:function(e){e=e||window.event,this.canClose&&e.keyCode===a&&this.close()},closeModal:function(e){if(this.id===e)return this.close(),!0}}},c=s,u=(n("6634"),n("2877")),l=Object(u["a"])(c,r,i,!1,null,null,null);l.options.__file="Modal.vue";t["a"]=l.exports},"6a67":function(e,t,n){},"6ffc":function(e,t,n){"use strict";var r=n("bb89"),i=n.n(r);i.a},7048:function(e,t,n){"use strict";var r=n("b562"),i=n.n(r);i.a},"7cc6":function(e,t,n){e.exports=n.p+"img/asdfqrcode.d5bd4a8c.svg"},"7e96":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{ref:"dropdown",staticClass:"EnvironmentsSwitch"},[n("a",{staticClass:"btn-flat dropdown-button current-environment grey-text text-lighten-5 waves-effect waves-light",style:{backgroundColor:e.bgColor},attrs:{"data-activates":"environment-dropdown-"+e._uid}},[e.$store.getters.currentEnvironment?n("span",{staticClass:"current-environment-name truncate"},[e._v("\n      "+e._s(e.currentEnvironmentName)+"\n    ")]):e._e(),e.$store.getters.currentEnvironment?e._e():n("span",{staticClass:"current-environment-name truncate"},[e._v("\n      Choose Environment\n    ")]),n("i",{staticClass:"fa fa-caret-down"})]),n("ul",{staticClass:"EnvironmentsSwitch-envList dropdown-content environment-dropdown",attrs:{id:"environment-dropdown-"+e._uid}},[e._l(e.$store.state.kuzzle.environments,function(t,r){return n("li",{key:t.name,staticClass:"EnvironmentsSwitch-env environment",attrs:{"data-env":"env_"+e.formatForDom(t.name)}},[n("div",{on:{click:function(t){e.clickSwitch(r)}}},[n("span",{staticClass:"name environment-attribute truncate"},[e._v(e._s(t.name))]),n("span",{staticClass:"host environment-attribute truncate"},[e._v(e._s(t.host))])]),n("i",{staticClass:"edit primary fa fa-pencil-alt",on:{click:function(t){t.preventDefault(),e.$emit("environment::create",r)}}}),n("i",{staticClass:"delete error fa fa-trash",on:{click:function(t){t.preventDefault(),e.$emit("environment::delete",r)}}})])}),n("li",{staticClass:"divider"}),n("li",[n("a",{attrs:{href:""},on:{click:function(t){t.preventDefault(),e.$emit("environment::create")}}},[n("i",{staticClass:"EnvironmentsSwitch-newConnectionBtn fa fa-plus-circle"}),e._v("\n        Create new connection")])])],2)])},i=[],o=(n("7514"),n("6b54"),n("7f7f"),n("a481"),n("ad9d")),a=n("e9d9"),s=n("66cb"),c=n.n(s),u=n("f684"),l=n.n(u),d=n("627e"),m=function(e){return e.replace(/[!"#$%&'()*+,.\/:;<=>?@[\]^`{|}~ ]/g,"-")},f={name:"EnvironmentsSwitch",props:["blendColor"],computed:{currentEnvironmentName:function(){return this.$store.getters.currentEnvironment?this.$store.getters.currentEnvironment.name:null},bgColor:function(){return this.blendColor?(e=this.$store.getters.currentEnvironment?this.$store.getters.currentEnvironment.color:o["a"],e||(e=o["a"]),c()(e).lighten(10).toString()):o["a"];var e}},methods:{clickSwitch:function(e){var t=this;return this.$store.dispatch(a["j"],e).then(function(){t.$router.push({path:"/fake-route"}),setTimeout(function(){return t.$router.push({path:"/"}),l.a.resolve()},0)}).catch(function(e){return t.$store.commit(d["a"],"An error occurred while switching environment"),l.a.reject(e)})},formatForDom:m},mounted:function(){$(this.$refs.dropdown).find(".dropdown-button").dropdown({constrain_width:!1,belowOrigin:!0})}},v=f,p=(n("cf47"),n("2877")),h=Object(p["a"])(v,r,i,!1,null,"4992a95e",null);h.options.__file="EnvironmentsSwitch.vue";t["a"]=h.exports},"8e11":function(e,t,n){"use strict";var r=n("41da"),i=n.n(r);i.a},"9b19":function(e,t,n){e.exports=n.p+"img/logo.803d53c0.svg"},"9dc8":function(e,t,n){"use strict";n.d(t,"g",function(){return r}),n.d(t,"h",function(){return i}),n.d(t,"f",function(){return o}),n.d(t,"b",function(){return a}),n.d(t,"e",function(){return s}),n.d(t,"d",function(){return c}),n.d(t,"a",function(){return u}),n.d(t,"c",function(){return l});var r="SET_CURRENT_USER",i="SET_TOKEN_VALID",o="SET_ADMIN_EXISTS",a="action/DO_LOGIN",s="action/PREPARE_SESSION",c="action/LOGIN_BY_TOKEN",u="action/CHECK_FIRST_ADMIN",l="action/DO_LOGOUT"},"9e3b":function(e,t,n){e.exports=n.p+"img/andrews_spelledout.1412c6fe.svg"},"9ec6":function(e,t,n){},a16a:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r="SET_ROUTE_BEFORE_REDIRECT"},a30c:function(e,t,n){"use strict";var r=n("07b8"),i=n.n(r);i.a},a47c:function(e,t,n){"use strict";n.d(t,"e",function(){return r}),n.d(t,"d",function(){return i}),n.d(t,"f",function(){return o}),n.d(t,"c",function(){return a}),n.d(t,"b",function(){return s}),n.d(t,"a",function(){return c});var r="UPDATE_USERLIST",i="UPDATE_TIMESHEETS",o="USERLIST",a="TIMESHEETS",s="DO_CLOCKIN",c="DEVICE_USERLIST"},ad9d:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return s});var r=n("653a"),i=n("9dc8"),o=n("e9d9"),a="#002835",s=function(e){r["a"].getters.currentEnvironmentId===e&&r["a"].dispatch(i["c"]),r["a"].dispatch(o["c"],e)}},affa:function(e,t,n){"use strict";var r=n("6a67"),i=n.n(r);i.a},b562:function(e,t,n){},b5a4:function(e,t){},b9c0:function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"isAuthenticated",function(){return p}),n.d(r,"user",function(){return h}),n.d(r,"tokenValid",function(){return g}),n.d(r,"adminAlreadyExists",function(){return b});var i,o,a=n("ade3"),s=n("9dc8"),c=function(){return{id:void 0,token:void 0,params:{},rights:[]}},u=n("04ff"),l=n("e9d9"),d=n("e710"),m=n("f684"),f=n.n(m),v=(i={},Object(a["a"])(i,s["b"],function(e,t){e.commit;var n=e.dispatch;return new f.a(function(e,r){u["a"].unsetJwtToken().loginPromise("local",{username:t.username,password:t.password},"2h").then(function(e){return n(s["e"],e.jwt)}).then(function(){e()}).catch(function(e){return r(new Error(e.message))})})}),Object(a["a"])(i,s["e"],function(e,t){var n=e.commit,r=e.dispatch,i=c();return r(l["m"],t),r(d["g"]),u["a"].whoAmIPromise().then(function(e){return i.id=e.id,i.token=e.jwt,i.params=e.content,u["a"].getMyRightsPromise()}).then(function(e){i.rights=e,n(s["g"],i),n(s["h"],!0)})}),Object(a["a"])(i,s["d"],function(e,t){var n=e.commit,r=e.dispatch,i=c();return"anonymous"===t.token?r(s["e"],t.token):t.token?u["a"].checkTokenPromise(t.token).then(function(e){return e.valid?(u["a"].setJwtToken(t.token),r(s["e"],t.token)):(n(s["g"],c()),n(s["h"],!1),r(l["m"],null),u["a"].unsetJwtToken(),f.a.resolve(c()))}):(n(s["g"],c()),n(s["h"],!1),u["a"].unsetJwtToken(),r(l["m"],null),f.a.resolve(i))}),Object(a["a"])(i,s["a"],function(e){var t=e.commit;return u["a"].queryPromise({controller:"server",action:"adminExists"},{}).then(function(e){return e.result.exists?t(s["f"],!0):t(s["f"],!1)}).catch(function(e){return 403===e.status?t(s["f"],!0):f.a.reject(e)})}),Object(a["a"])(i,s["c"],function(e){var t=e.commit,n=e.dispatch;return u["a"].logout(),u["a"].unsetJwtToken(),n(l["m"],null),t(s["g"],c()),t(s["h"],!1),n(s["a"])}),i),p=function(e){return void 0!==e.user.id},h=function(e){return e.user},g=function(e){return e.tokenValid},b=function(e){return e.adminAlreadyExists},E={user:c(),tokenValid:!1,adminAlreadyExists:!1},C=(o={},Object(a["a"])(o,s["g"],function(e,t){e.user=t}),Object(a["a"])(o,s["h"],function(e,t){e.tokenValid=t}),Object(a["a"])(o,s["f"],function(e,t){e.adminAlreadyExists=t}),o);t["a"]={state:E,mutations:C,getters:r,actions:v}},bb89:function(e,t,n){},bcdb:function(e,t,n){"use strict";n.d(t,"f",function(){return f}),n.d(t,"a",function(){return v}),n.d(t,"d",function(){return p}),n.d(t,"b",function(){return h}),n.d(t,"c",function(){return g}),n.d(t,"e",function(){return _});n("5df3");var r=n("d4ec"),i=n("53ca"),o=(n("28a5"),n("ac6a"),n("456d"),n("be94")),a=(n("96cf"),n("1da1")),s=(n("cadf"),n("551c"),n("097d"),n("04ff")),c=n("f684"),u=n.n(c),l=n("9dc8"),d=n("e9d9"),m=n("627e");u.a.config({warnings:!1,longStackTraces:!1,cancellation:!0,monitoring:!0});var f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return"connected"!==s["a"].state?new u.a(function(t,n){var r=setTimeout(function(){s["a"].removeListener("connected",i),n(new Error("Kuzzle does not respond"))},e),i=s["a"].addListener("connected",function(){clearTimeout(r),s["a"].removeListener("connected",i),t()})}):u.a.resolve()},v=function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:console.log(t),n={controller:"kuzzle-core-plugin-boilerplate/clockPunch",action:"clockIn"},r={empId:t},s["a"].query(n,r,function(e,t){return console.log(e),console.log(t.result),t});case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),p=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return e&&t?s["a"].collection(e,t).searchPromise(Object(o["a"])({},n,{sort:i}),Object(o["a"])({},r)).then(function(e){var t=null;i.length>0&&(t="string"===typeof i[0]&&"_uid"!==i[0]?i[0]:Object.keys(i[0])[0]);var n=e.documents.map(function(e){var n={content:new E(e.content),id:e.id,meta:new C(e.meta)};return t&&(n.additionalAttribute={name:t,value:b(e.content,t.split("."))}),n});return{documents:n,total:e.total}}):u.a.reject(new Error("Missing collection or index"))},h=function(e){void 0===e.port&&(e.port=7512),"boolean"!==typeof e.ssl&&(e.ssl=!1),"connected"===s["a"].state&&s["a"].disconnect(),s["a"].host=e.host,s["a"].port=e.port,s["a"].sslConnection=e.ssl,s["a"].connect()},g=function(e){s["a"].off("tokenExpired"),s["a"].off("queryError"),s["a"].off("networkError"),s["a"].off("connected"),s["a"].off("reconnected"),s["a"].off("discarded"),s["a"].on("queryError",function(t){if(t&&t.message)switch(t.message){case"Token expired":case"Invalid token":case"Json Web Token Error":e.commit(l["h"],!1),s["a"].connect();break}}),s["a"].on("networkError",function(t){e.commit(d["h"],t)}),s["a"].on("connected",function(){e.commit(d["h"],null)}),s["a"].on("reconnected",function(){e.commit(d["h"],null),e.dispatch(d["k"])}),s["a"].on("discarded",function(t){e.commit(m["a"],{text:t.message})})},b=function e(t,n){var r=n.shift();return"object"===Object(i["a"])(t[r])?e(t[r],n):t[r]},E=function e(t){var n=this;Object(r["a"])(this,e),Object.keys(t).forEach(function(e){n[e]=t[e]})},C=function e(t){var n=this;Object(r["a"])(this,e),Object.keys(t).forEach(function(e){n[e]=t[e]})},w=function e(t){var n=this;Object(r["a"])(this,e),Object.keys(t).forEach(function(e){n[e]=t[e]})},_=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return s["a"].queryPromise({controller:"auth",action:"getStrategies"},{}).then(function(e){return n=e.result,s["a"].security.searchUsersPromise(Object(o["a"])({},r,{sort:a}),Object(o["a"])({},i)).then(function(e){var t=null,r=[],i=[];return a.length>0&&(t="string"===typeof a[0]?a[0]:Object.keys(a[0])[0]),e.users.forEach(function(e){var o={content:new E(e.content),id:e.id,credentials:new w({}),meta:new C(e.meta||{})};t&&(o.additionalAttribute={name:t,value:b(e.content,t.split("."))}),n.forEach(function(t){i.push(s["a"].security.getCredentialsPromise(t,e.id).then(function(e){o.credentials[t]=e}).catch(function(){}))}),r.push(o)}),u.a.all(i).then(function(){return{documents:r,total:e.total}})})})}},c106:function(e,t,n){},c137:function(e,t,n){},c3f0:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"Signup"},[n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col card wrapper s10 offset-s1 m8 offset-m2 l8 offset-l2 xl6 offset-xl3"},[e._m(0),n("div",{staticClass:"row"},[n("div",{staticClass:"col offset-s4 s2"},[n("environment-switch",{on:{"environment::create":e.editEnvironment,"environment::delete":e.deleteEnvironment}})],1)]),e._m(1),n("div",{staticClass:"row"},[n("form",{staticClass:"col s10 offset-s1",attrs:{id:"loginForm",method:"post"},on:{submit:function(t){return t.preventDefault(),e.Signup(t)}}},[n("div",{staticClass:"row"},[n("div",{staticClass:"input-field col s12"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"validate",attrs:{id:"username",type:"text",name:"username",required:""},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),n("label",{attrs:{for:"username"}},[e._v("Username")])])]),n("div",{staticClass:"row"},[n("div",{staticClass:"input-field col s12"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.password1,expression:"password1"}],staticClass:"validate",attrs:{type:"password",name:"password1",id:"pass1",required:""},domProps:{value:e.password1},on:{input:function(t){t.target.composing||(e.password1=t.target.value)}}}),n("label",{attrs:{for:"pass1"}},[e._v("Password")])])]),n("div",{staticClass:"row"},[n("div",{staticClass:"input-field col s12"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.password2,expression:"password2"}],staticClass:"validate",attrs:{type:"password",name:"password2",id:"pass2",required:""},domProps:{value:e.password2},on:{input:function(t){t.target.composing||(e.password2=t.target.value)}}}),n("label",{attrs:{for:"pass2"}},[e._v("Confirm password")])])]),n("div",{staticClass:"row"},[n("div",{staticClass:"input-field col s12 reset"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.reset,expression:"reset"}],staticClass:"filled-in",attrs:{type:"checkbox",id:"reset"},domProps:{checked:Array.isArray(e.reset)?e._i(e.reset,null)>-1:e.reset},on:{change:function(t){var n=e.reset,r=t.target,i=!!r.checked;if(Array.isArray(n)){var o=null,a=e._i(n,o);r.checked?a<0&&(e.reset=n.concat([o])):a>-1&&(e.reset=n.slice(0,a).concat(n.slice(a+1)))}else e.reset=i}}}),n("label",{attrs:{for:"reset"}},[e._v("Remove anonymous user credentials.")])])]),n("div",{staticClass:"row"},[n("div",{staticClass:"col s2"},[n("p",{staticClass:"message error"},[e._v(e._s(e.error))])]),n("div",{staticClass:"col s10"},[e.waiting?n("div",{staticClass:"preloader-wrapper active right"},[e._m(2)]):e._e(),n("a",{staticClass:"LoginAsAnonymous-Btn btn-flat waves-effect waves-teal",on:{click:e.loginAsGuest}},[e._v("Login as Anonymous")]),n("button",{directives:[{name:"show",rawName:"v-show",value:!e.waiting,expression:"!waiting"}],staticClass:"btn waves-effect waves-light right",attrs:{type:"submit",name:"action"}},[e._v("\n                  CREATE ADMIN ACCOUNT\n                ")])])])])])])])])])},i=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("h2",{staticClass:"center-align logo"},[r("img",{staticStyle:{width:"60%"},attrs:{src:n("9b19"),alt:"Welcome to the Kuzzle Admin Console"}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row message-warning"},[n("h5",[e._v("Create an Admin Account")]),n("div",{staticClass:"divider"}),n("div",{staticClass:"message"},[n("i",{staticClass:"fa fa-warning"}),e._v("\n              To secure your Kuzzle installation we recommend you select the âRemove anonymous user credentialsâ checkbox below."),n("br"),e._v("\n              To continue using an insecure installation and skip the Admin Account creation, click the âLOGIN AS ANONYMOUSâ button below.\n\n          ")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"spinner-layer"},[n("div",{staticClass:"circle-clipper left"},[n("div",{staticClass:"circle"})]),n("div",{staticClass:"gap-patch"},[n("div",{staticClass:"circle"})]),n("div",{staticClass:"circle-clipper right"},[n("div",{staticClass:"circle"})])])}],o=(n("cadf"),n("551c"),n("097d"),n("04ff")),a=n("9dc8"),s=n("e9d9"),c=n("7e96"),u={name:"Signup",components:{EnvironmentSwitch:c["a"]},data:function(){return{username:"",password1:"",password2:"",reset:!1,error:null,waiting:!1}},methods:{Signup:function(){var e=this;if(""!==this.username&&""!==this.password1&&""!==this.password2)if(this.password1===this.password2){this.error=null,this.waiting=!0;var t={_id:this.username,reset:this.reset,body:{content:{},credentials:{local:{username:this.username,password:this.password1}}}};o["a"].queryPromise({controller:"security",action:"createFirstAdmin"},t).then(function(){e.$store.dispatch(s["m"],null),e.$store.commit(a["f"],!0),e.$router.push({name:"Login"})}).catch(function(t){console.error("An error occurred while creating the first admin",t),e.$router.push({name:"Login"})})}else this.error="Password does not match";else this.error="All fields are mandatory"},loginAsGuest:function(){var e=this;this.error="",this.$store.dispatch(a["e"],"anonymous").then(function(){e.$router.push({name:"Data"})}).catch(function(t){e.error=t.message})},editEnvironment:function(e){this.$emit("environment::create",e)},deleteEnvironment:function(e){this.$emit("environment::delete",e)}}},l=u,d=n("2877"),m=Object(d["a"])(l,r,i,!1,null,null,null);m.options.__file="Signup.vue";t["default"]=m.exports},c47a:function(e,t,n){},cf47:function(e,t,n){"use strict";var r=n("c47a"),i=n.n(r);i.a},d1c4:function(e,t,n){"use strict";var r=n("9ec6"),i=n.n(r);i.a},d51c:function(e,t,n){"use strict";n.d(t,"e",function(){return r}),n.d(t,"f",function(){return i}),n.d(t,"c",function(){return o}),n.d(t,"j",function(){return a}),n.d(t,"l",function(){return s}),n.d(t,"m",function(){return c}),n.d(t,"g",function(){return u}),n.d(t,"k",function(){return l}),n.d(t,"i",function(){return d}),n.d(t,"h",function(){return m}),n.d(t,"d",function(){return f}),n.d(t,"b",function(){return v}),n.d(t,"a",function(){return p});var r="collection/RECEIVE_COLLECTION_DETAIL",i="collection/RESET_COLLECTION_DETAIL",o="collection/FETCH_COLLECTION_DETAIL",a="collection/SET_MAPPING",s="collection/SET_SCHEMA",c="collection/UPDATE_COLLECTION",u="collection/SET_ALLOW_FORM",l="collection/SET_REALTIME_ONLY",d="collection/SET_COLLECTION_NAME",m="collection/SET_COLLECTION_DEFAULT_VIEW_JSON",f="collection/GET_COLLECTION_DEFAULT_VIEW_JSON",v="collection/CREATE_COLLECTION",p="collection/CLEAR_COLLECTION"},dda9:function(e,t,n){},e008:function(e,t,n){},e710:function(e,t,n){"use strict";n.d(t,"h",function(){return r}),n.d(t,"c",function(){return i}),n.d(t,"b",function(){return o}),n.d(t,"a",function(){return a}),n.d(t,"f",function(){return s}),n.d(t,"g",function(){return c}),n.d(t,"e",function(){return u}),n.d(t,"i",function(){return l}),n.d(t,"d",function(){return d});n("cadf"),n("551c"),n("097d");var r="index/RECEIVE_INDEXES_COLLECTIONS",i="index/ADD_STORED_COLLECTION",o="index/ADD_REALTIME_COLLECTION",a="index/ADD_INDEX",s="index/DELETE_INDEX",c="index/LIST_INDEXES_AND_COLLECTION",u="index/CREATE_INDEX",l="index/REMOVE_REALTIME_COLLECTION",d="index/CREATE_COLLECTION_IN_INDEX"},e9d9:function(e,t,n){"use strict";n.d(t,"f",function(){return r}),n.d(t,"b",function(){return i}),n.d(t,"l",function(){return o}),n.d(t,"m",function(){return a}),n.d(t,"c",function(){return s}),n.d(t,"a",function(){return c}),n.d(t,"j",function(){return u}),n.d(t,"k",function(){return l}),n.d(t,"i",function(){return d}),n.d(t,"h",function(){return m}),n.d(t,"d",function(){return f}),n.d(t,"g",function(){return v}),n.d(t,"e",function(){return p});n("cadf"),n("551c"),n("097d");var r="SET_CONNECTION",i="CREATE_ENVIRONMENT",o="UPDATE_ENVIRONMENT",a="kuzzle/UPDATE_TOKEN_CURRENT_ENVIRONMENT",s="DELETE_ENVIRONMENT",c="CONNECT_TO_ENVIRONMENT",u="SWITCH_ENVIRONMENT",l="kuzzle/SWITCH_LAST_ENVIRONMENT",d="kuzzle/SET_LAST_CONNECTED_ENVIRONMENT",m="SET_ERROR_FROM_KUZZLE",f="kuzzle/LOAD_ENVIRONMENTS",v="kuzzle/SET_ENVIRONMENTS",p="RESET"},ecd3:function(e,t,n){"use strict";var r=n("2b0e");t["a"]={id:"focus",bind:function(e){r["a"].nextTick(function(){e&&e.focus()},0)}}},f6c6:function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var r=n("8c4f"),i=(n("7f7f"),n("ac6a"),n("578a")),o=n("31b3"),a=n("653a"),s=n("50f3"),c=[],u=[];function l(e){var t=new e({routes:[{path:"/",name:"Home",redirect:"/crew",component:function(e){n.e("chunk-869dd63c").then(function(){var t=[n("57da")];e.apply(null,t)}.bind(this)).catch(n.oe)},meta:{auth:!0},children:[{path:"/crew",name:"Crew",meta:{auth:!0},component:function(e){Promise.all([n.e("chunk-05644e9e"),n.e("chunk-efa8838e")]).then(function(){var t=[n("8e7e")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/profile",name:"Profile",meta:{auth:!0},component:function(e){Promise.all([n.e("chunk-05644e9e"),n.e("chunk-654bdffc")]).then(function(){var t=[n("8387")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/security",name:"Security",redirect:"/security/users",component:function(e){Object(s["b"])()?n.e("chunk-43403b2b").then(function(){var t=[n("e895")];e.apply(null,t)}.bind(this)).catch(n.oe):n.e("chunk-821aa338").then(function(){var t=[n("9d5d")];e.apply(null,t)}.bind(this)).catch(n.oe)},children:c},{path:"/data",name:"DataLayout",meta:{auth:!0},component:function(e){n.e("chunk-2d0b1652").then(function(){var t=[n("2053")];e.apply(null,t)}.bind(this)).catch(n.oe)},children:u}]},{path:"/signup",name:"Signup",component:function(e){Promise.resolve().then(function(){var t=[n("c3f0")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/login",name:"Login",meta:{auth:!1},component:i["a"]},{path:"/create-env",name:"CreateEnv",meta:{auth:!1},component:o["a"]}]},"hash");return t.afterEach(function(){Array.prototype.forEach.call(document.querySelectorAll(".loader"),function(e){e.classList.remove("loading")})}),t.beforeEach(function(e,t,n){console.log(e.name),Array.prototype.forEach.call(document.querySelectorAll(".loader"),function(e){e.classList.add("loading")}),"CreateEnv"===e.name&&a["a"].getters.hasEnvironment||"Signup"===e.name&&a["a"].getters.adminAlreadyExists||"Login"===e.name&&a["a"].getters.isAuthenticated?n("/"):n()}),t}t["default"]=l(r["a"])}});
//# sourceMappingURL=app.078872d6.js.map